"use strict";(self.webpackChunksensor_manager_complete=self.webpackChunksensor_manager_complete||[]).push([[879],{83550:function(fe,Z,e){e.r(Z);var z=e(15009),l=e.n(z),k=e(99289),h=e.n(k),T=e(5574),D=e.n(T),B=e(32319),M=e(15360),I=e(63973),N=e(97175),U=e(27461),J=e(84401),K=e(49354),G=e(4161),b=e(90930),c=e(38345),m=e(74273),y=e(92016),a=e(74656),g=e(99859),ve=e(9361),P=e(2453),W=e(83622),he=e(39890),De=e(78957),H=e(41972),ne=e(57520),O=e(67294),x=e(53589),X=e(74981),Pe=e(16081),ht=e.n(Pe),Oe=e(44576),Dt=e.n(Oe),Me=e(95245),Pt=e.n(Me),pe=e(97138),Ot=e.n(pe),ge=e(56395),Mt=e.n(ge),Ce=e(90252),pt=e.n(Ce),je=e(39859),gt=e.n(je),Te=e(41812),Ct=e.n(Te),Be=e(96488),jt=e.n(Be),ye=e(89899),Tt=e.n(ye),Ae=e(62706),Bt=e.n(Ae),Re=e(51506),yt=e.n(Re),Le=e(12477),At=e.n(Le),Ie=e(24203),Rt=e.n(Ie),Ue=e(40049),Lt=e.n(Ue),Ke=e(42270),It=e.n(Ke),be=e(90787),Ut=e.n(be),We=e(22777),Kt=e.n(We),xe=e(42557),bt=e.n(xe),Se=e(61970),Wt=e.n(Se),Ze=e(76588),xt=e.n(Ze),t=e(85893),d=a.Z.Option,Fe=function(){var $e=(0,O.useState)([]),se=D()($e,2),Ve=se[0],ze=se[1],ke=(0,O.useState)(""),ae=D()(ke,2),C=ae[0],_e=ae[1],Ne=(0,O.useState)(""),re=D()(Ne,2),S=re[0],A=re[1],Je=(0,O.useState)("yaml"),le=D()(Je,2),j=le[0],p=le[1],Ge=(0,O.useState)({}),oe=D()(Ge,2),F=oe[0],He=oe[1],Xe=(0,O.useState)(!1),ie=D()(Xe,2),Qe=ie[0],Q=ie[1],Ye=(0,O.useState)(!1),ue=D()(Ye,2),we=ue[0],Y=ue[1],qe=(0,O.useState)(!1),ce=D()(qe,2),et=ce[0],w=ce[1],tt=g.Z.useForm(),nt=D()(tt,1),R=nt[0],st=(0,O.useState)("monokai"),de=D()(st,2),q=de[0],at=de[1],_t=ve.Z.useToken(),L=_t.token,rt=function(i){var _=new Map,r={title:"Root",key:"",children:[],isLeaf:!1,icon:(0,t.jsx)(B.Z,{})};_.set("",r),i.forEach(function(n){var o=n.split("/").filter(Boolean),f=r,v="";if(o.length===0){var ee={title:n||"(empty)",key:n,originalKey:n,isLeaf:!0,icon:(0,t.jsx)(M.Z,{})};_.set(n,ee),f.children.push(ee)}else o.forEach(function(s,Ee){if(v=Ee===0&&!n.startsWith("/")?s:"".concat(v,"/").concat(s),!_.has(v)){var V=Ee===o.length-1,me={title:s,key:v,originalKey:V?n:void 0,children:V?void 0:[],isLeaf:V,icon:V?function(te){var vt=(te=s.split(".").pop())===null||te===void 0?void 0:te.toLowerCase();switch(vt){case"json":return(0,t.jsx)(M.Z,{style:{color:"#f5222d"}});case"md":return(0,t.jsx)(I.Z,{});case"yaml":case"yml":return(0,t.jsx)(M.Z,{style:{color:"#52c41a"}});case"txt":return(0,t.jsx)(M.Z,{});case"xlsx":case"xls":return(0,t.jsx)(N.Z,{});case"zip":case"rar":case"7z":return(0,t.jsx)(U.Z,{});case"jpg":case"jpeg":case"png":case"gif":return(0,t.jsx)(J.Z,{});case"pdf":return(0,t.jsx)(K.Z,{});case"doc":case"docx":return(0,t.jsx)(G.Z,{});default:return(0,t.jsx)(M.Z,{})}}():(0,t.jsx)(B.Z,{})};_.set(v,me),f.children.push(me)}f=_.get(v)})});var E=function n(o){o.children&&(o.children.sort(function(f,v){return f.isLeaf===v.isLeaf?f.title.localeCompare(v.title):f.isLeaf?1:-1}),o.children.forEach(n))};return E(r),r.children||[]},$=function(){var u=h()(l()().mark(function i(){var _,r,E;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,x.lg)({params:{prefix:"/"}});case 3:_=o.sent,r=_.keys,E=rt(r),ze(E),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(0),P.ZP.error("\u83B7\u53D6\u952E\u503C\u5BF9\u5931\u8D25"),console.error(o.t0);case 13:case"end":return o.stop()}},i,null,[[0,9]])}));return function(){return u.apply(this,arguments)}}();(0,O.useEffect)(function(){$().then(function(u){})},[]);var lt=function(){var u=h()(l()().mark(function i(_,r){var E,n,o,f,v;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(_.length>0&&r.node)){s.next=29;break}if(E=r.node,n=E.originalKey||_[0].toString(),_e(n),!r.node.isLeaf){s.next=29;break}return s.next=7,(0,y.request)("/api/etcd/get?key=".concat(n));case 7:if(f=s.sent,A(f.value),v=(o=n.split(".").pop())===null||o===void 0?void 0:o.toLowerCase(),!v){s.next=28;break}s.t0=v,s.next=s.t0==="yaml"||s.t0==="yml"?14:s.t0==="java"?16:s.t0==="toml"?18:s.t0==="json"?20:s.t0==="sql"?22:s.t0==="go"?24:26;break;case 14:return p("yaml"),s.abrupt("break",28);case 16:return p("java"),s.abrupt("break",28);case 18:return p("toml"),s.abrupt("break",28);case 20:return p("json"),s.abrupt("break",28);case 22:return p("sql"),s.abrupt("break",28);case 24:return p("golang"),s.abrupt("break",28);case 26:return p("text"),s.abrupt("break",28);case 28:He({createRevision:f.createRevision,modRevision:f.modRevision,version:f.version,lease:f.lease});case 29:case"end":return s.stop()}},i)}));return function(_,r){return u.apply(this,arguments)}}(),ot=function(){var u=h()(l()().mark(function i(){var _,r;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,j==="json"&&(_=JSON.parse(S),A(JSON.stringify(_,null,2)),P.ZP.success("".concat(C," \u683C\u5F0F\u5316\u6210\u529F"))),n.next=4,(0,x.a1)({key:C,value:S});case 4:r=n.sent,r.success&&P.ZP.success("".concat(C," \u4FDD\u5B58\u6210\u529F")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),P.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 11:case"end":return n.stop()}},i,null,[[0,8]])}));return function(){return u.apply(this,arguments)}}(),it=function(){if(j==="json")try{var i=JSON.parse(S);A(JSON.stringify(i,null,2)),P.ZP.success("\u683C\u5F0F\u5316\u6210\u529F")}catch(_){P.ZP.error("\u683C\u5F0F\u5316\u5931\u8D25")}else j==="yaml"&&P.ZP.success("\u683C\u5F0F\u5316\u6210\u529F")},ut=function(){R.resetFields(),w(!0)},ct=function(){var u=h()(l()().mark(function i(){var _,r;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R.validateFields();case 2:return _=n.sent,r=_.key,n.next=6,(0,x.gz)({key:r,value:_.value});case 6:return P.ZP.success("\u6DFB\u52A0\u6210\u529F"),w(!1),n.next=10,$();case 10:case"end":return n.stop()}},i)}));return function(){return u.apply(this,arguments)}}(),dt=function(){R.setFieldsValue({key:C,value:S}),Q(!0)},Et=function(){var u=h()(l()().mark(function i(){var _;return l()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,R.validateFields();case 2:return _=E.sent,E.next=5,(0,x.gz)({key:_.key,value:_.value});case 5:return P.ZP.success("\u7F16\u8F91\u6210\u529F"),Q(!1),E.next=9,$();case 9:_.key===C&&A(_.value);case 10:case"end":return E.stop()}},i)}));return function(){return u.apply(this,arguments)}}(),mt=function(){Y(!0)},ft=function(){var u=h()(l()().mark(function i(){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.IV)({key:C});case 2:return P.ZP.success("\u5220\u9664\u6210\u529F"),Y(!1),_e(""),A(""),r.next=8,$();case 8:case"end":return r.stop()}},i)}));return function(){return u.apply(this,arguments)}}();return(0,t.jsxs)(b._z,{header:{title:"Etcd V3 Editor",breadcrumb:{}},style:{height:"100vh",padding:"24px",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("div",{style:{flex:1,display:"flex",minHeight:0},children:[(0,t.jsxs)("div",{style:{width:"25%",marginRight:"24px",overflow:"auto"},children:[(0,t.jsx)(W.ZP,{type:"primary",onClick:ut,style:{marginBottom:16},children:"\u65B0\u589E\u914D\u7F6E\u6587\u4EF6"}),(0,t.jsx)(c.Z,{title:"ETCD V3 \u914D\u7F6E\u6811",bodyStyle:{padding:"12px"},style:{boxShadow:"0 2px 8px ".concat(L.colorBgElevated),borderRadius:L.borderRadius,background:L.colorBgContainer},children:(0,t.jsx)(he.Z,{treeData:Ve,onSelect:lt,showLine:{showLeafIcon:!1},showIcon:!0,defaultExpandAll:!0,blockNode:!0,style:{background:L.colorBgContainer,borderRadius:L.borderRadius,padding:"12px",boxShadow:"0 2px 8px ".concat(L.colorBgElevated)}})})]}),(0,t.jsxs)("div",{style:{width:"75%",display:"flex",flexDirection:"column",minHeight:0},children:[(0,t.jsxs)(c.Z,{gutter:8,ghost:!0,style:{marginBottom:24},children:[(0,t.jsx)(m.Z,{statistic:{title:"\u521B\u5EFA\u4FEE\u8BA2\u7248\u672C",value:F.createRevision||"-",valueStyle:{color:"#3f8600",fontSize:"16px"}}}),(0,t.jsx)(m.Z,{statistic:{title:"\u4FEE\u6539\u4FEE\u8BA2\u7248\u672C",value:F.modRevision||"-",valueStyle:{color:"#1890ff",fontSize:"16px"}}}),(0,t.jsx)(m.Z,{statistic:{title:"\u7248\u672C",value:F.version||"-",valueStyle:{color:"#722ed1",fontSize:"16px"}}}),(0,t.jsx)(m.Z,{statistic:{title:"\u79DF\u7EA6",value:F.lease||"-",valueStyle:{color:"#eb2f96",fontSize:"16px"}}})]}),(0,t.jsxs)("div",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:"16px",justifyContent:"space-between"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,t.jsx)("span",{children:"\u6587\u4EF6\u683C\u5F0F\uFF1A"}),(0,t.jsxs)(a.Z,{value:j,onChange:p,style:{width:120},children:[(0,t.jsx)(d,{value:"yaml",children:"YAML"}),(0,t.jsx)(d,{value:"json",children:"JSON"}),(0,t.jsx)(d,{value:"ini",children:"ini"}),(0,t.jsx)(d,{value:"javascript",children:"JavaScript"}),(0,t.jsx)(d,{value:"java",children:"Java"}),(0,t.jsx)(d,{value:"golang",children:"Golang"}),(0,t.jsx)(d,{value:"sql",children:"SQL"}),(0,t.jsx)(d,{value:"txt",children:"TXT"}),(0,t.jsx)(d,{value:"toml",children:"TOML"})]}),(0,t.jsx)("span",{children:"\u7F16\u8F91\u5668\u4E3B\u9898\uFF1A"}),(0,t.jsxs)(a.Z,{value:q,onChange:at,style:{width:120},children:[(0,t.jsx)(d,{value:"monokai",children:"Monokai"}),(0,t.jsx)(d,{value:"github",children:"GitHub"}),(0,t.jsx)(d,{value:"tomorrow",children:"Tomorrow"}),(0,t.jsx)(d,{value:"kuroir",children:"Kuroir"}),(0,t.jsx)(d,{value:"twilight",children:"Twilight"}),(0,t.jsx)(d,{value:"xcode",children:"XCode"}),(0,t.jsx)(d,{value:"textmate",children:"TextMate"}),(0,t.jsx)(d,{value:"terminal",children:"Terminal"})]})]}),(0,t.jsxs)(De.Z,{children:[(0,t.jsx)(W.ZP,{type:"default",onClick:it,children:"\u683C\u5F0F\u5316"}),(0,t.jsx)(W.ZP,{type:"primary",onClick:ot,children:"\u4FDD\u5B58"}),(0,t.jsx)(W.ZP,{type:"default",onClick:dt,children:"\u7F16\u8F91"}),(0,t.jsx)(W.ZP,{danger:!0,onClick:mt,children:"\u5220\u9664"})]})]}),(0,t.jsx)(X.ZP,{mode:j,theme:q,value:S,onChange:A,width:"100%",height:"calc(100vh - 350px)",style:{marginBottom:16},setOptions:{useWorker:!1}})]})]}),(0,t.jsx)(H.Z,{title:"\u6DFB\u52A0\u952E\u503C",open:et,onOk:ct,onCancel:function(){return w(!1)},children:(0,t.jsxs)(g.Z,{form:R,layout:"vertical",children:[(0,t.jsx)(g.Z.Item,{label:"\u952E",name:"key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u952E\uFF0C\u4EE5 / \u5F00\u59CB"}],children:(0,t.jsx)(ne.Z,{})}),(0,t.jsx)(g.Z.Item,{label:"\u503C",name:"value",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u503C"}],children:(0,t.jsx)(X.ZP,{mode:j,theme:"monokai",width:"100%",height:"200px",setOptions:{useWorker:!1}})})]})}),(0,t.jsx)(H.Z,{title:"\u7F16\u8F91\u952E\u503C",open:Qe,onOk:Et,onCancel:function(){return Q(!1)},width:800,style:{top:20},children:(0,t.jsxs)(g.Z,{form:R,layout:"vertical",children:[(0,t.jsx)(g.Z.Item,{label:"\u952E",name:"key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u952E"}],children:(0,t.jsx)(ne.Z,{disabled:!0})}),(0,t.jsx)(g.Z.Item,{label:"\u503C",name:"value",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u503C"}],children:(0,t.jsx)(X.ZP,{mode:j,theme:q,width:"100%",height:"400px",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,useWorker:!1}})})]})}),(0,t.jsx)(H.Z,{title:"\u786E\u8BA4\u5220\u9664",open:we,onOk:ft,onCancel:function(){return Y(!1)},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",okButtonProps:{danger:!0},children:(0,t.jsxs)("p",{children:["\u786E\u5B9A\u8981\u5220\u9664\u952E ",C," \u5417\uFF1F"]})})]})};Z.default=Fe},53589:function(fe,Z,e){e.d(Z,{IV:function(){return G},a1:function(){return M},gz:function(){return N},lg:function(){return J},x4:function(){return D}});var z=e(15009),l=e.n(z),k=e(99289),h=e.n(k),T=e(92016);function D(c){return B.apply(this,arguments)}function B(){return B=h()(l()().mark(function c(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,T.request)("/api/login",{method:"POST",data:m}));case 1:case"end":return a.stop()}},c)})),B.apply(this,arguments)}function M(c){return I.apply(this,arguments)}function I(){return I=h()(l()().mark(function c(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,T.request)("/api/etcd/put",{method:"POST",data:m}));case 1:case"end":return a.stop()}},c)})),I.apply(this,arguments)}function N(c){return U.apply(this,arguments)}function U(){return U=h()(l()().mark(function c(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",M(m));case 1:case"end":return a.stop()}},c)})),U.apply(this,arguments)}function J(c){return K.apply(this,arguments)}function K(){return K=h()(l()().mark(function c(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,T.request)("/api/etcd/list",m));case 1:case"end":return a.stop()}},c)})),K.apply(this,arguments)}function G(c){return b.apply(this,arguments)}function b(){return b=h()(l()().mark(function c(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,T.request)("/api/etcd/delete",{method:"DELETE",params:m}));case 1:case"end":return a.stop()}},c)})),b.apply(this,arguments)}}}]);
